<html>
  <head>
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<title>Stock Tracker</title>
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssreset/reset-min.css">
	<script src="http://yui.yahooapis.com/3.2.0/build/yui/yui-min.js"></script> 
  </head>
	<style>
		.history span {
			float: left;
			height: 100px;
			display: inline-block;
		}
		.history span.bar {
			background-color: green;
			margin-top: 30px;
			width: 19%;
		}
		.history span.spacer {
			height: 100px;
			width: 1.25%;
		}
	</style>
  <body style="background-color: #C5CCD4; padding: 5px;">
  	<button id="runWeek">Run Week</button>
  	<button id="runYear">Run Year</button>
  	<button id="cacheWeek">Load Week Cache</button>
  	<button id="cacheYear">Load Year Cache</button>
  	<button id="printWeek">Print Week</button>
  	<button id="printYear">Print Year</button>
  	<div class="history" >
  		<span class="bar"></span>
  		<span class="spacer"></span>
  		<span class="bar"></span>
  		<span class="spacer"></span>
  		<span class="bar"></span>
  		<span class="spacer"></span>
  		<span class="bar"></span>
  		<span class="spacer"></span>
  		<span class="bar"></span>
  		<span class="spacer"></span>
  	</div>
	<script>
		var Y = new YUI();
		var port = { id: 1};
		window.portfoliosValueHistory = {};
		Y.use("history", "node", function() {
			Y.one("#runWeek").on("click", function(){
				runTest(testWeek);
			});
			Y.one("#runYear").on("click", function(){
				runTest(testYear);
			});
			Y.one("#cacheWeek").on("click", function(){
				readHistory("week", port.id);
			});
			Y.one("#cacheYear").on("click", function(){
				readHistory("year", port.id);
			});
			Y.one("#printWeek").on("click", function(){
				printHistory("week", port, Y.one("body"));
			});
			Y.one("#printYear").on("click", function(){
				printHistory("year", port, Y.one("body"));
			});
			
	        var testWeek = [
	    					{day: "1/3/2011", value: 200 },
	    					{day: "1/3/2011", value: 300 },
	    					{day: "1/4/2011", value: 400 },	
	    					
	    					{day: "3/4/2011", value: 400 },
	    					{day: "3/4/2011", value: 400 },
	    					{day: "3/4/2011", value: 402 },
	    					{day: "3/5/2011", value: 500 },
	    					{day: "3/6/2011", value: 600 },
	    					{day: "3/7/2011", value: 600 }
			];
			var testYear = [
					{day: "1/3/2011", value: 200 },
					{day: "1/3/2011", value: 300 },
					{day: "1/4/2011", value: 400 },	

					{day: "2/2/2011", value: 200 },
					{day: "2/3/2011", value: 300 },
					{day: "2/4/2011", value: 400 },	
					
					{day: "3/2/2011", value: 200 },
					{day: "3/3/2011", value: 300 },
					{day: "3/4/2011", value: 400 },
					{day: "3/4/2011", value: 400 },
					{day: "3/4/2011", value: 402 },
					{day: "3/5/2011", value: 500 },
					{day: "3/6/2011", value: 600 },
					{day: "3/7/2011", value: 600 },
					{day: "3/8/2011", value: 600 },

					{day: "4/2/2011", value: 200 },
					{day: "4/3/2011", value: 300 },
					{day: "4/4/2011", value: 400 },					

					{day: "5/2/2011", value: 200 },
					{day: "5/3/2011", value: 300 },
					{day: "5/4/2011", value: 400 },					

					{day: "6/2/2011", value: 200 },
					{day: "6/3/2011", value: 300 },
					{day: "6/4/2011", value: 400 },

					{day: "7/2/2011", value: 200 },
					{day: "7/3/2011", value: 300 },
					{day: "7/4/2011", value: 400 },

					{day: "8/2/2011", value: 200 },
					{day: "8/3/2011", value: 300 },
					{day: "8/4/2011", value: 400 },
			];
			function runTest(data) {
				var entry, obj;
				for (entry in data) {
					obj = testWeek[entry]; 
					recordPortValue({id: "port_id_1"}, obj.value, obj.day);
				}
				Y.log(JSON.stringify(portfoliosValueHistory));
			}
		});
	</script>
</body>